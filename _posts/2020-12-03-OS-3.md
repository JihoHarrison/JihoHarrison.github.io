---
layout: post
title:  "[운영체제] 👩🏼‍💻 3. 운영체제의 발전"
date:   2020-12-03 18:34:10 +0700
categories: [operating system]
---

> [경성대학교 양희재 교수님 - 고등 운영체제](http://www.kocw.net/home/search/kemView.do?kemId=978503) 을 보고 포스팅한 것입니다.

이 포스팅을 읽기 전에 [이 블로그의 다른 포스팅 - 운영체제의 역사](https://choheeis.github.io/newblog//articles/2020-08/OSHistory)에 대해서 먼저 읽어보는 것을 추천합니다!


## 0️⃣ 운영체제는 계속해서 발전해왔다.

[이 블로그의 다른 포스팅 - 운영체제의 역사](https://choheeis.github.io/newblog//articles/2020-08/OSHistory) 를 보면 총 4단계의 순서로 발전해온 운영체제 역사를 알 수 있을 것이다.

Time-Sharing System을 지원하는 운영체제를 가장 마지막 순서로 알아보았는데 이 후로는 운영체제의 발전이 없었을까?

아니다! 기술이 발전함에 따라 사람들은 당연히 기존의 컴퓨터보다 더 성능이 좋고, 더 빠른 컴퓨터를 개발했기 때문에 이에 적합한 운영체제도 계속 발전했다.

Time-Sharging System을 지원하는 운영체제 이후로 어떤 운영체제들이 더 등장했는지 알아보자.

## 1️⃣ Multi-Processor System(다중 프로세서 시스템)의 등장

[이 블로그의 다른 포스팅 - 운영체제가 뭘까?](https://choheeis.github.io/newblog//articles/2020-05/OSstart) 에서 알아볼 수 있듯, 기존의 컴퓨터 구조는 아래 그림과 같았다.

![02](https://user-images.githubusercontent.com/31889335/100973396-d5422c80-357d-11eb-986e-5c591c0a1e06.PNG)

프로세서(cpu) 한 개와 메인 메모리 한 개로 이루어진 구조였다.

하지만 기술이 발전하고 더 빠르고 성능 좋은 컴퓨터를 원하는 시대가 되면서 __한 개였던 프로세서(cpu)가 여러 개(Multi, 다중)로 존재하는 컴퓨터가 개발되었다.__

<img width="527" alt="01" src="https://user-images.githubusercontent.com/31889335/100974383-84333800-357f-11eb-96f5-b790285e3396.png">

위 그림처럼 메인 메모리는 그대로 1개이지만 프로세서(cpu)의 개수가 2개 이상인 컴퓨터 시스템을 __다중 프로세서 시스템(Multi-Processor System)__ 이라고 한다. 또는 프로세서 여러 개가 병렬로 있는 모습에 빗대어 __병렬 시스템(Paralle System)__ 이라고도 부른다.

다중 프로세서 시스템을 지원하는 컴퓨터는 기존의 컴퓨터보다 어떤 부분에서 좋을까?

1. __처리 성능이 좋다.__

    컴퓨터가 처리할 수 있는 양이 프로세서 개수만큼 늘어나기 때문에 훨씬 많은 계산 작업을 한 번에 할 수 있게 된다. 즉, 일손이 많아진 것이다.

2. __비용면에서 이득이다.__

    기존의 성능 좋은 프로세서는 가격이 비쌌다.

    하나의 성능 좋은 프로세서를 사용하는 것보다 성능은 조금 좋지 않지만 싼 가격의 프로세서를 여러 개 사용하는 것이 결과적인 비용면에서 이득이다.

    예를 들어, 성능이 정말 좋은 CPU가 100만원이라고 가정하면 이 CPU 성능의 반 정도 성능을 가지고 있는 CPU는 비용도 1/2로 50만원일까? 그건 아니였다. 50만원보다 더 쌌기 때문에 성능은 조금 떨어지더라고 싼 가격의 프로세서를 여러 개 사용하는 것이 결과적으로 이득이였던 것이다.

3. __신뢰성이 높다.__

    기존의 프로세서 한 개만으로 동작하던 컴퓨터는 프로세서가 고장나면 모든 작업이 먹통이 되버렸다.

    하지만 멀티 프로세서 시스템 컴퓨터에서는 하나의 프로세서가 고장나더라도 다른 프로세서가 살아있기 때문에 모든 작업이 먹통되는 것을 방지할 수 있다.

    이러한 점에서 컴퓨터에 대한 신뢰성이 더 높아졌다고 볼 수 있다.

많은 장점을 가지고 있는 멀티 프로세서 시스템이 등장함으로써 기존의 운영체제 동작 방식도 달라져야 했다.

기존에는 하나의 프로세서가 메인 메모리에 올라온 프로그램들을 어떤 순서로 Time-Sharing 할지에 대한 스케줄링이 존재했다면 이제는 "어떤 프로세서"를 선택하냐의 문제도 추가되었기 때문에 운영체제의 CPU 스케줄링 기술이 또 다시 개발되고 바뀌게 되었다.

이렇게 멀티 프로세서 시스템을 지원할 수 있는 운영체제도 많이 등장하였고, 대표적으로 __리눅스__ 운영체제는 멀티 프로세서 시스템을 지원하는 운영체제이다.

## 2️⃣ 분산 시스템(Distributed System)의 등장

기술 발전과 더 빠른 컴퓨터에 대한 기대에 부응하여 Multi-Processor System 외의 또 다른 시스템도 등장하였다.

<img width="690" alt="02" src="https://user-images.githubusercontent.com/31889335/100976723-46d0a980-3583-11eb-96bb-e8b7196b441e.png">

위 그림을 보면 총 3개의 컴퓨터가 있고 각 컴퓨터는 __네트워크 통신망__ 을 통해 모두 연결되어 있는 모습이다.

각 컴퓨터에는 프로세서 1개와 메인 메모리 1개가 존재하여 전체적으로 보면 프로세서 3개와 메인 메모리 3개로 구성되어 있는 시스템이다.

이와 같은 시스템을 __분산 시스템__ 이라고 부른다. 위에서 예시로 든 Multi-Processor System 그림과의 차이점은 프로세서 개수는 3개로 같지만 메인 메모리의 수가 분산 시스템에서 더 많다는 점이이다.

사실 분산 시스템은 컴퓨터가 여러 대 있는 것처럼 보이지만 사실 말그대로 "분산"된 것 뿐이지 하나의 네트워크 통신망에 연결된 모든 컴퓨터가 단 한 대의 컴퓨터를 대신한다고 볼 수 있다.

국내 일기 예보 시스템을 처리하는 컴퓨터가 분산 시스템의 형태라고 가정해보자.

컴퓨터 1은 서울과 경기도에 해당하는 날씨를 처리하고, 컴퓨터 2는 강원도와 충청도에 해당하는 날씨를 처리한다. 컴퓨터 3은 전라도와 경상도, 제주도에 해당하는 날씨를 처리한다고 가정해보자.

각 컴퓨터는 자신이 맡은 처리를 한 후, 네트워크 통신망을 통해 메시지를 주고 받으면서 국내 전 지역의 일기 예보를 완성시키게 된다.

분산 시스템이 이런 식으로 동작한다고 이해하면 편하다. 

새로운 컴퓨터 시스템 및 구조가 등장하면 당연히 운영체제의 동작 방식도 달라지기 마련이다. 예를 들어 분산 시스템을 지원하는 운영체제에는 각 컴퓨터간의 통신을 위해 메시지를 주고 받을 수 있도록 하는 기술이 추가되어야 할 것이다. 따라서 분산 시스템을 지원하는 운영체제도 개발되었다.

## 3️⃣ 실시간 시스템(Real-Time System)의 등장

앞서 다중 프로세서 시스템, 분산 시스템 등이 등장한 이유와 마찬가지로 기술의 발전과 더 성능 좋은 컴퓨터를 기대하는 시대가 되면서 실시간 시스템(Real-Time System) 이라는 것도 등장하였다.

__실시간 시스템이란__ 컴퓨터를 사용해 처리해야 할 작업이 있는데 이 작업을 __어떠한 시간 내에 반드시 끝내야 하는 시스템__ 을 실시간 시스템이라고 한다.

예를 들어, 네비게이션 서비스는 사용자가 50미터 앞에 있는 교차로에 도착하기 전까지 왼쪽으로 가야하는지 오른쪽으로 가야하는지 반드시 알려줘야 한다. 

이런식으로 __타이트한 시간 제약__ 이 주어지는 작업을 처리하기 위해 등장한 시스템이 실시간 시스템이다. "실시간"이라는 단어만 보면 단순히 "빨리", "실시간처럼" 처리되는 시스템일 것 같지만 __"시간 제약 안에 반드시 처리되는 시스템"__ 을 말한다.

실시간 시스템을 적용한 대표적인 곳이 자동화된 공장이다. 자동화된 공장은 컨베이어 벨트 위에서 물건들이 일정한 속도로 이동하기 때문에 이동하면서 실행되는 각 작업이 정해진 시간 내에 처리되지 못한다면 뒤의 작업들이 밀리고 공장은 엉망이 될 것이다.

이러한 실시간 시스템을 지원하는 운영체제도 당연히 개발되었다. 예를 들어, 프로그램1, 프로그램2, 프로그램3이 실행중인데 프로그램 2가 반드시 3초 안에 끝나야하는 작업이라면 CPU가 프로그램 2의 작업만 집중적으로 처리하도록 해주는 운영체제가 필요할 것이다.

즉, 운영체제의 발전은 새로운 컴퓨터 구조, 새로운 컴퓨터 시스템이 등장하면서 자연스럽게 해당 시스템에 적합한 형태로 발전했다는 사실을 알 수 있다.

## 4️⃣ Interrupt(인터럽트, 가로채다) 기반 시스템의 등장

1960년대 후반 ~ 1970년대 쯤 __마우스와 키보드가 발명__ 되어 본격적으로 사용되기 시작했다.

마우스와 키보드가 등장하면서 Interrrupt 기반 시스템이 등장하게 되었는데 이에 대해 자세히 알아보자.

먼저 마우스를 예로 들어보자.

사용자가 마우스를 움직이면 모니터에 마우스 커서가 따라 움직인다. 이렇게 하기 위해 컴퓨터 내부에서는 어떤 일이 일어날까?

사용자가 마우스를 조금이라도 움직이면 마우스에서 전기 신호를 보낸다. 이 전기 신호는 컴퓨터와 연결되어 있는 선을 통해(무선, 블루투스 마우스도 있지만 일단 유선 마우스라고 생각해보자) 컴퓨터로 이동하고, 컴퓨터 구조 내부에 있는 CPU(프로세서)까지 도달하게 된다.

CPU가 마우스에서 보낸 전기신호를 인식하게 되면 기존에 자신이 하고 있던 __계산 작업을 멈추고__ 운영체제 프로그램 안에 있는 __Interrupt Service Routine(ISR)__ 을 실행시킨다.

__마우스 움직임 이벤트가 발생한 것을 CPU에게 알려 하던 일을 멈추고 ISR을 실행시킬 수 있도록 하는 것을 Interrupt__ 라고 한다.

운영체제 프로그램에서의 Interrupt Service Routine이란 __Interrupt가 발생하면 해야할 서비스 루틴(작업)__ 이다. 운영체제 프로그램 안에는 마우스 움직임 이벤트가 발생할 때 해야할 작업 코드(모니터의 커서 위치를 옮기는 코드)가 작성되어 있는데 이게 바로 ISR 중 하나이다.

ISR을 실행시킴으로써 모니터의 커서가 사용자가 원하는 위치로 이동하게 된다. ISR 작업이 끝나면 CPU는 다시 기존의 하던 작업을 이어서 한다.

만약 사용자가 바탕화면의 카카오톡 아이콘을 더블클릭(실행하기 위함) 했다면 어떻게 될까?

마찬가지로 마우스에서 더블 클릭 했다는 전기신호를 컴퓨터로 보내 Interrupt를 걸어준다. 전기신호를 받은 CPU는 운영체제 프로그램의 더블클릭과 관련된 ISR(어떤 프로그램을 실행시킨 건지 파악해 해당 프로그램을 실행시켜주는 코드)을 실행시키게 되고, 운영체제에 의해 카카오톡 프로그램이 메모리에 올라가 실행된다.

<img width="723" alt="03" src="https://user-images.githubusercontent.com/31889335/101127345-b8226200-3640-11eb-944c-21e75bf2f904.png">

키보드도 똑같다.

사용자가 키보드의 어떤 키 하나를 누르면 키보드에서 CPU로 전기신호를 보내 Interrupt를 발생시키고 CPU가 운영체제의 키보드 관련 ISR을 실행시키는 것이다.

이렇게 마우스나 키보드에 의해 발생한 Interrupt를 __하드웨어 Interrupt__ 라고 부른다.

하드웨어 Interrupt 뿐 아니라 __소프트웨어 Interrupt__ 도 존재한다.

만약 사용자가 워드 프로그램을 사용하다가 하드디스크에 저장된 어떤 파일을 읽어오고 싶다면?

이 작업이 내부에서는 어떻게 동작할까?

워드 프로그램 자체에서 하드디스크에 저장된 파일을 읽어오는 것이 아니다. 워드 프로그램이 이 때 소프트웨어 Interrupt를 걸어주는데 Interrupt에 의해 CPU가 하던일을 멈추고 운영체제에 존재하는 ISR 중 하드디스크의 내용을 읽거나 쓰는 루틴을 실행시킨다.

만약 하드디스크에 접근해서 읽거나 쓰는 작업 코드가 각 프로그램 자체 내부에 존재한다면 카카오톡 프로그램에도 존재하고, 워드 프로그램에도 존재하고, 게임 프로그램에도 존재하고, 여러 프로그램에 중복적으로 존재할 것이다.

이런 중복을 막기 위해 하드디스크 내용을 읽고 쓰는 작업이 아예 운영체제 안의 ISR로 들어있는 것이다.

결론적으로 __현대 운영체제는 Interrupt 기반 시스템을 지원하는 운영체제다.__

또한 ISR은 위에서 예시로 든 상황 외에도 여러 상황에 대처하기 위한 작업들이 많이 있는데 [위키백과 - ISR](https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8_%ED%95%B8%EB%93%A4%EB%9F%AC) 을 통해 확인할 수 있다.

이렇게 운영체제는 부팅에 의해 메인 메모리에 올라온 후 거의 __대기 상태__ 에 있다가 Interrupt가 걸려올 때만 일을 한다.

# 끝!